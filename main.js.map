{
  "version": 3,
  "sources": ["main.ts", "storage.ts", "analytics.ts"],
  "sourcesContent": ["import { App, Notice, Plugin, PluginSettingTab, Setting } from \"obsidian\";\nimport { readCounter, writeCounter } from \"./storage\";\nimport { trackEvent } from \"./analytics\";\n\ninterface VaultOpsTemplateGuardSettings {\n  enableAnalytics: boolean;\n}\n\nconst DEFAULT_SETTINGS: VaultOpsTemplateGuardSettings = {\n  enableAnalytics: false\n};\n\nexport default class VaultOpsTemplateGuardPlugin extends Plugin {\n  settings: VaultOpsTemplateGuardSettings = DEFAULT_SETTINGS;\n\n  async onload(): Promise<void> {\n    await this.loadSettings();\n    this.addCommand({\n      id: \"vault-ops-template-guard-run-sample-command\",\n      name: \"Vault Ops - Template Guard: Run sample command\",\n      callback: () => {\n        new Notice(\"Vault Ops - Template Guard is active.\");\n      }\n    });\n\n    const currentCount = await readCounter(this);\n    await writeCounter(this, currentCount + 1);\n    trackEvent(\"plugin_loaded\", { slug: \"vault-ops-template-guard\" });\n    this.addSettingTab(new VaultOpsTemplateGuardSettingTab(this.app, this));\n  }\n\n  onunload(): void {\n    // no-op\n  }\n\n  async loadSettings(): Promise<void> {\n    this.settings = { ...DEFAULT_SETTINGS, ...(await this.loadData()) };\n  }\n\n  async saveSettings(): Promise<void> {\n    await this.saveData(this.settings);\n  }\n\n}\n\nclass VaultOpsTemplateGuardSettingTab extends PluginSettingTab {\n  plugin: VaultOpsTemplateGuardPlugin;\n\n  constructor(app: App, plugin: VaultOpsTemplateGuardPlugin) {\n    super(app, plugin);\n    this.plugin = plugin;\n  }\n\n  display(): void {\n    const { containerEl } = this;\n    containerEl.empty();\n\n    new Setting(containerEl)\n      .setName(\"Enable analytics events\")\n      .setDesc(\"Store simple usage counters locally.\")\n      .addToggle((toggle) =>\n        toggle\n          .setValue(this.plugin.settings.enableAnalytics)\n          .onChange(async (value) => {\n            this.plugin.settings.enableAnalytics = value;\n            await this.plugin.saveSettings();\n          })\n      );\n  }\n}\n", "import type { Plugin } from \"obsidian\";\n\ninterface CounterData {\n  counter: number;\n}\n\nconst DEFAULT_COUNTER: CounterData = { counter: 0 };\n\nexport async function readCounter(plugin: Plugin): Promise<number> {\n  const current = (await plugin.loadData()) as Partial<CounterData> | null;\n  return current?.counter ?? DEFAULT_COUNTER.counter;\n}\n\nexport async function writeCounter(plugin: Plugin, next: number): Promise<void> {\n  await plugin.saveData({ counter: next });\n}\n", "export function trackEvent(name: string, payload: Record<string, string>): void {\n  if (process.env.FOF_ANALYTICS_OPT_IN !== \"true\") {\n    return;\n  }\n\n  console.log(\"analytics-event\", JSON.stringify({ name, payload }));\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA+D;;;ACM/D,IAAM,kBAA+B,EAAE,SAAS,EAAE;AAElD,eAAsB,YAAY,QAAiC;AACjE,QAAM,UAAW,MAAM,OAAO,SAAS;AACvC,SAAO,SAAS,WAAW,gBAAgB;AAC7C;AAEA,eAAsB,aAAa,QAAgB,MAA6B;AAC9E,QAAM,OAAO,SAAS,EAAE,SAAS,KAAK,CAAC;AACzC;;;ACfO,SAAS,WAAW,MAAc,SAAuC;AAC9E,MAAI,QAAQ,IAAI,yBAAyB,QAAQ;AAC/C;AAAA,EACF;AAEA,UAAQ,IAAI,mBAAmB,KAAK,UAAU,EAAE,MAAM,QAAQ,CAAC,CAAC;AAClE;;;AFEA,IAAM,mBAAkD;AAAA,EACtD,iBAAiB;AACnB;AAEA,IAAqB,8BAArB,cAAyD,uBAAO;AAAA,EAC9D,WAA0C;AAAA,EAE1C,MAAM,SAAwB;AAC5B,UAAM,KAAK,aAAa;AACxB,SAAK,WAAW;AAAA,MACd,IAAI;AAAA,MACJ,MAAM;AAAA,MACN,UAAU,MAAM;AACd,YAAI,uBAAO,uCAAuC;AAAA,MACpD;AAAA,IACF,CAAC;AAED,UAAM,eAAe,MAAM,YAAY,IAAI;AAC3C,UAAM,aAAa,MAAM,eAAe,CAAC;AACzC,eAAW,iBAAiB,EAAE,MAAM,2BAA2B,CAAC;AAChE,SAAK,cAAc,IAAI,gCAAgC,KAAK,KAAK,IAAI,CAAC;AAAA,EACxE;AAAA,EAEA,WAAiB;AAAA,EAEjB;AAAA,EAEA,MAAM,eAA8B;AAClC,SAAK,WAAW,EAAE,GAAG,kBAAkB,GAAI,MAAM,KAAK,SAAS,EAAG;AAAA,EACpE;AAAA,EAEA,MAAM,eAA8B;AAClC,UAAM,KAAK,SAAS,KAAK,QAAQ;AAAA,EACnC;AAEF;AAEA,IAAM,kCAAN,cAA8C,iCAAiB;AAAA,EAC7D;AAAA,EAEA,YAAY,KAAU,QAAqC;AACzD,UAAM,KAAK,MAAM;AACjB,SAAK,SAAS;AAAA,EAChB;AAAA,EAEA,UAAgB;AACd,UAAM,EAAE,YAAY,IAAI;AACxB,gBAAY,MAAM;AAElB,QAAI,wBAAQ,WAAW,EACpB,QAAQ,yBAAyB,EACjC,QAAQ,sCAAsC,EAC9C;AAAA,MAAU,CAAC,WACV,OACG,SAAS,KAAK,OAAO,SAAS,eAAe,EAC7C,SAAS,OAAO,UAAU;AACzB,aAAK,OAAO,SAAS,kBAAkB;AACvC,cAAM,KAAK,OAAO,aAAa;AAAA,MACjC,CAAC;AAAA,IACL;AAAA,EACJ;AACF;",
  "names": []
}
